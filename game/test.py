import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# Create a DataFrame from the provided data
data = {
    "cache_size": [1024]*7 + [2048]*7 + [4096]*7 + [8192]*7 + [16384]*7,
    "calculation_result": [
        21.898592645608574, 21.516987529395468, 17.142216344044883, 17.429821928606533, 23.813214685035604,
        28.523415778068756, 37.72778395279575, 17.97699814969343, 17.39914839722553, 13.348263317424875,
        13.350242254933326, 18.109916785677772, 20.541041514810697, 29.44922870910608, 11.071165891033104,
        10.380516700583458, 7.074041946878721, 5.332906762359289, 5.919002087779071, 7.451029542238772,
        11.25619654807334, 9.127189611897373, 8.38574769206413, 5.282114032975695, 3.5099754941571875,
        3.438733743852925, 4.140267090599058, 4.9608665107703676, 8.327698858482881, 7.543050136381776,
        4.5911350196079725, 2.8915575227660266, 2.086459779744255, 2.6784919176893927, 3.3031765245239835
    ],
    "total_loads_stores": [
        66395, 65238, 51974, 52846, 72200, 86481, 114388, 54505, 52753, 40471, 40477, 54908,
        62279, 89288, 33567, 31473, 21448, 16169, 17946, 22591, 34128, 27673, 25425, 16015,
        10642, 10426, 12553, 15041, 25249, 22870, 13920, 8767, 6326, 8121, 10015
    ],
    "total_cycles": [
        15195193, 21603293, 29345293, 50832493, 124075693, 285294893, 740638893, 14006193,
        19106293, 24744093, 40937293, 96408493, 207848493, 579998893, 11912393, 14850293,
        17134893, 21490893, 37269293, 80846893, 226974893, 11322993, 13640693, 14961693,
        17069293, 25237293, 48725293, 104818093, 11080593, 13129693, 14123693, 15569293,
        18677293, 34542893, 72651693
    ],
    "bytes_in_blocks": [4, 8, 16, 32, 64, 128, 256]*5
}

df = pd.DataFrame(data)

# Add a new column for log2(bytes_in_blocks)
df['log2_bytes_in_blocks'] = np.log2(df['bytes_in_blocks'])

# Plotting
fig, ax = plt.subplots(figsize=(10, 6))
for cache_size in df['cache_size'].unique():
    subset = df[df['cache_size'] == cache_size]
    ax.plot(subset['log2_bytes_in_blocks'], subset['total_cycles'], label=f'Cache Size {cache_size} Bytes', marker='o')
ax.set_xlabel('log2(Number of bytes in blocks)')
ax.set_ylabel('Miss Rate')
ax.set_title('Miss Rate vs. log2(Number of bytes in blocks) for Different Cache Sizes')
ax.legend()
plt.grid(True)
plt.show()

